<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‘ì •ì´ˆë“±í•™êµ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ë‘ì •ì´ˆë“±í•™êµ ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
            <div class="user-info" id="userInfo" style="display: none;">
                <span id="userName"></span>
                <button onclick="logout()" class="logout-btn">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </header>

        <main>
            <!-- ë¡œê·¸ì¸ í™”ë©´ -->
            <div id="loginSection">
                <div class="login-form">
                    <h2>ë‘ì •ì´ˆë“±í•™êµ ì‹œì„¤ ê´€ë¦¬</h2>
                    <p id="loginDescription" style="text-align: center; color: #4a5568; margin-bottom: 2rem; font-size: 0.95rem;">í•™êµ ì‹œìŠ¤í…œì— ì ‘ì†í•˜ê¸° ìœ„í•´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                    
                    <!-- í•™êµ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ -->
                    <div id="schoolPasswordForm">
                        <div class="form-group">
                            <label for="schoolPassword">í•™êµ ë¹„ë°€ë²ˆí˜¸:</label>
                            <input type="password" id="schoolPassword" name="schoolPassword" placeholder="í•™êµ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                        </div>
                        <button type="button" onclick="verifySchoolPassword()">ë‹¤ìŒ</button>
                    </div>

                    <!-- ì„ ìƒë‹˜ ë¡œê·¸ì¸ -->
                    <div id="gradeClassForm" style="display: none;">
                        <div class="grade-selection">
                            <h3>í•™ë…„ì„ ì„ íƒí•´ì£¼ì„¸ìš”</h3>
                            <div class="grade-buttons">
                                <button type="button" class="grade-btn" data-grade="1">1í•™ë…„</button>
                                <button type="button" class="grade-btn" data-grade="2">2í•™ë…„</button>
                                <button type="button" class="grade-btn" data-grade="3">3í•™ë…„</button>
                                <button type="button" class="grade-btn" data-grade="4">4í•™ë…„</button>
                                <button type="button" class="grade-btn" data-grade="5">5í•™ë…„</button>
                                <button type="button" class="grade-btn" data-grade="6">6í•™ë…„</button>
                            </div>
                        </div>
                        <div class="class-selection" id="classSelection" style="display: none;">
                            <h3 id="selectedGradeTitle">ë°˜ì„ ì„ íƒí•´ì£¼ì„¸ìš”</h3>
                            <div class="class-buttons" id="classButtons">
                                <!-- í•™ë…„ ì„ íƒ í›„ ë™ì  ìƒì„± -->
                            </div>
                            <button type="button" class="back-btn" onclick="showGradeSelection()">â† í•™ë…„ ì„ íƒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 1.5rem;">
                        <button type="button" onclick="showAdminLogin()" style="background: transparent; border: none; color: #718096; font-size: 0.85rem; cursor: pointer; text-decoration: underline;">ê´€ë¦¬ìë¡œ ë¡œê·¸ì¸</button>
                    </div>
                    
                    <!-- ê´€ë¦¬ì ë¡œê·¸ì¸ (ìˆ¨ê²¨ì§) -->
                    <div id="adminLoginForm" style="display: none; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #e2e8f0;">
                        <form id="adminForm">
                            <div class="form-group">
                                <label for="adminPassword">ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸:</label>
                                <input type="password" id="adminPassword" name="adminPassword" placeholder="ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                            </div>
                            <button type="submit">ê´€ë¦¬ì ë¡œê·¸ì¸</button>
                        </form>
                        <div style="text-align: center; margin-top: 1rem;">
                            <button type="button" onclick="hideAdminLogin()" style="background: transparent; border: none; color: #718096; font-size: 0.85rem; cursor: pointer; text-decoration: underline;">ì„ ìƒë‹˜ ë¡œê·¸ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì„ ìƒë‹˜ ë©”ë‰´ -->
            <div id="teacherSection" style="display: none;">
                <div class="menu-grid">
                    <div class="menu-item" onclick="openPage('computer-room')">
                        <h3>ì»´í“¨í„°ì‹¤/ê³µìœ ê¸° ì˜ˆì•½</h3>
                        <p>ì»´í“¨í„°ì‹¤ê³¼ ê³µìœ ê¸°ë¥¼ ì˜ˆì•½í•©ë‹ˆë‹¤</p>
                    </div>
                    <div class="menu-item disabled" onclick="showUpdateMessage('science-supplies')">
                        <h3>ê³¼í•™ì‹¤ ì¤€ë¹„ë¬¼ ì‹ ì²­</h3>
                        <p>ğŸ”„ ì—…ë°ì´íŠ¸ ì˜ˆì •</p>
                    </div>
                </div>
            </div>

            <!-- ê´€ë¦¬ì ë©”ë‰´ -->
            <div id="adminSection" style="display: none;">
                <div class="admin-dashboard">
                    <h2>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h2>
                    <div class="dashboard-stats">
                        <div class="stat-item">
                            <h3>ëŒ€ê¸°ì¤‘ì¸ ì‹ ì²­</h3>
                            <span id="pendingRequests">0</span>
                        </div>
                        <div class="stat-item">
                            <h3>ì˜¤ëŠ˜ ì²˜ë¦¬ëœ ì‹ ì²­</h3>
                            <span id="todayProcessed">0</span>
                        </div>
                        <div class="stat-item">
                            <h3>ì „ì²´ ì‹ ì²­</h3>
                            <span id="totalRequests">0</span>
                        </div>
                    </div>
                    
                    <div class="admin-menu-grid">
                        <div class="menu-item" onclick="openAdminPage('computer-room-manage')">
                            <h3>ì»´í“¨í„°ì‹¤ ì‹ ì²­ ê´€ë¦¬</h3>
                            <p>ì»´í“¨í„°ì‹¤ ì‚¬ìš© ì‹ ì²­ì„ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
                        </div>
                        <div class="menu-item" onclick="openAdminPage('tablet-manage')">
                            <h3>íƒœë¸”ë¦¿ ì •ë³´ ê´€ë¦¬</h3>
                            <p>íƒœë¸”ë¦¿ ê³µìœ ê¸° ì •ë³´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
                        </div>
                        <div class="menu-item" onclick="openAdminPage('science-manage')">
                            <h3>ê³¼í•™ì‹¤ ì¤€ë¹„ë¬¼ ê´€ë¦¬</h3>
                            <p>ê³¼í•™ì‹¤ ì¤€ë¹„ë¬¼ ì‹ ì²­ì„ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
                        </div>
                        <div class="menu-item" onclick="openAdminPage('maintenance-manage')">
                            <h3>ìœ ì§€ë³´ìˆ˜ ì‹ ì²­ ê´€ë¦¬</h3>
                            <p>ì»´í“¨í„° ìœ ì§€ë³´ìˆ˜ ì‹ ì²­ì„ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
                        </div>
                        <div class="menu-item" onclick="openAdminPage('toner-manage')">
                            <h3>í† ë„ˆ ì‹ ì²­ ê´€ë¦¬</h3>
                            <p>í† ë„ˆ ì‹ ì²­ì„ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore-compat.js"></script>
    
    <!-- Firebase ì„¤ì • ë° ì´ˆê¸°í™” -->
    <script>
    // Firebase ì„¤ì • - ê¹ƒí—ˆë¸Œ í˜ì´ì§€ìš© (ë°ëª¨ ëª¨ë“œ)
    const firebaseConfig = {
        apiKey: "your-api-key-here",
        authDomain: "your-project-id.firebaseapp.com", 
        projectId: "your-project-id",
        storageBucket: "your-project-id.firebasestorage.app",
        messagingSenderId: "your-sender-id",
        appId: "your-app-id"
    };
    
    let db = null;
    let isFirebaseEnabled = false;
    
    // Firebase ì´ˆê¸°í™” í•¨ìˆ˜
    function initializeFirebase() {
        try {
            console.log("ğŸ”¥ Firebase ì´ˆê¸°í™” ì‹œë„...");
            
            if (typeof firebase === 'undefined') {
                throw new Error("Firebase SDKê°€ ë¡œë“œë˜ì§€ ì•ŠìŒ");
            }
            
            if (firebaseConfig.apiKey !== "your-api-key-here") {
                firebase.initializeApp(firebaseConfig);
                db = firebase.firestore();
                isFirebaseEnabled = true;
                
                window.db = db;
                window.isFirebaseEnabled = isFirebaseEnabled;
                
                console.log("âœ… Firebase ì—°ê²°ë¨ - ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©");
                console.log("ğŸ“Š í”„ë¡œì íŠ¸:", firebaseConfig.projectId);
            } else {
                console.log("âš¡ Firebase ë¯¸ì„¤ì • - localStorage ì‚¬ìš© (ë°ëª¨ ëª¨ë“œ)");
                console.log("ğŸ”¥ ë¡œì»¬ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ firebase-config.js íŒŒì¼ì„ ì„¤ì •í•˜ì„¸ìš”");
            }
        } catch (error) {
            console.error("âŒ Firebase ì´ˆê¸°í™” ì‹¤íŒ¨:", error);
            console.log("âš¡ localStorage ì‚¬ìš© (ë°ëª¨ ëª¨ë“œ)");
            isFirebaseEnabled = false;
            window.isFirebaseEnabled = false;
        }
    }
    
    // í˜ì´ì§€ ë¡œë“œ í›„ Firebase ì´ˆê¸°í™”
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeFirebase);
    } else {
        initializeFirebase();
    }
    </script>
    <script src="js/database.js"></script>
    <script src="js/main.js"></script>
</body>
</html>